<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#008751">
  
  <!-- iOS PWA Settings -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ARCON DG">
  
  <title>ARCON | DG Executive Dashboard</title>
  
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  
  <!-- Icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  
  <!-- Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            arconGreen: "#008751",
            arconGreenDark: "#00643C",
            arconGold: "#D4AF37",
            arconGoldLight: "#F4D03F",
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            serif: ['Merriweather', 'serif'],
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-out',
            'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
          },
          keyframes: {
            fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
            slideUp: { '0%': { transform: 'translateY(100%)' }, '100%': { transform: 'translateY(0)' } }
          },
          backgroundImage: {
            'green-gradient': 'linear-gradient(135deg, #008751 0%, #005a32 100%)',
            'gold-gradient': 'linear-gradient(135deg, #D4AF37 0%, #B4941F 100%)',
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Merriweather:wght@400;700;900&display=swap');
    
    body { 
      font-family: Inter, sans-serif; 
      background: #f8fafc; 
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior-y: none;
    }
    
    .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    .pt-safe { padding-top: env(safe-area-inset-top); }
    .bottom-nav-safe { padding-bottom: max(env(safe-area-inset-bottom), 12px); }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 5px; height: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    
    .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
  </style>
</head>

<body class="flex h-screen overflow-hidden text-gray-800 bg-slate-50 pb-[calc(70px+env(safe-area-inset-bottom))] md:pb-0">

  <!-- APP CONTAINER -->
  <div id="app-container" class="flex h-full w-full">
    
    <!-- DESKTOP SIDEBAR -->
    <aside class="hidden md:flex w-72 bg-green-gradient text-white border-r border-white/10 flex-col flex-shrink-0 z-20 relative shadow-xl">
      <div class="h-24 flex items-center px-6 border-b border-white/10">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-lg transform rotate-3 transition hover:rotate-0">
             <img src="https://raw.githubusercontent.com/KingAmada/arcon/refs/heads/main/arcon.jpg" class="w-9 h-9 object-contain">
          </div>
          <div>
            <h1 class="font-extrabold text-white text-xl tracking-tight leading-none">ARCON</h1>
            <div class="text-[10px] font-bold text-green-100/80 uppercase tracking-[0.15em] mt-1">Executive Suite</div>
          </div>
        </div>
      </div>
      
      <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
        <div class="px-3 py-2">
          <p class="text-[10px] font-black uppercase tracking-widest text-green-200/60 mb-3">High Command</p>
          <button onclick="setView('overview')" class="desktop-nav-btn group w-full text-left px-4 py-4 rounded-xl flex items-center gap-3 text-sm font-semibold transition-all duration-200 text-white/80 hover:bg-white/10 hover:text-white hover:shadow-lg">
            <i class="ph ph-chart-line-up text-xl"></i> Overview
          </button>
          <button onclick="setView('map')" class="desktop-nav-btn group w-full text-left px-4 py-4 rounded-xl flex items-center gap-3 text-sm font-semibold transition-all duration-200 text-white/80 hover:bg-white/10 hover:text-white hover:shadow-lg">
            <i class="ph ph-globe-hemisphere-west text-xl"></i> National Map
          </button>
           <button onclick="alert('Module loading...')" class="desktop-nav-btn group w-full text-left px-4 py-4 rounded-xl flex items-center gap-3 text-sm font-semibold transition-all duration-200 text-white/80 hover:bg-white/10 hover:text-white hover:shadow-lg">
            <i class="ph ph-users-three text-xl"></i> Zonal Heads
          </button>
        </div>
      </nav>

      <div class="p-4 border-t border-white/10">
        <div class="bg-black/20 rounded-2xl p-4 text-white backdrop-blur-sm border border-white/5">
          <div class="flex items-center justify-between mb-3">
            <div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center font-bold border border-white/10">
              <i class="ph ph-crown text-2xl text-arconGold"></i>
            </div>
            <div class="h-2 w-2 rounded-full bg-green-400 animate-pulse shadow-[0_0_8px_rgba(74,222,128,0.5)]"></div>
          </div>
          <div>
            <div class="text-xs text-white/60 font-medium uppercase tracking-wide">Welcome,</div>
            <div class="font-bold text-base">Director General</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- MOBILE BOTTOM NAV -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg border-t border-gray-200 flex items-center justify-around z-40 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] bottom-nav-safe h-[calc(70px+env(safe-area-inset-bottom))]">
      <button onclick="setView('overview')" id="mob-nav-overview" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 active text-arconGreen transition-colors group">
        <div class="p-1.5 rounded-xl group-hover:bg-gray-50 transition-colors">
          <i class="ph ph-chart-line-up text-2xl mb-0.5"></i>
        </div>
        <span class="text-[10px] font-bold">Stats</span>
      </button>
      <button onclick="setView('map')" id="mob-nav-map" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 transition-colors group">
        <div class="p-1.5 rounded-xl group-hover:bg-gray-50 transition-colors">
          <i class="ph ph-globe-hemisphere-west text-2xl mb-0.5"></i>
        </div>
        <span class="text-[10px] font-bold">Map</span>
      </button>
      <button onclick="alert('Menu...')" class="flex flex-col items-center justify-center w-full h-full text-gray-400 transition-colors group">
        <div class="p-1.5 rounded-xl group-hover:bg-gray-50 transition-colors">
          <i class="ph ph-dots-three-circle text-2xl mb-0.5"></i>
        </div>
        <span class="text-[10px] font-bold">More</span>
      </button>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col min-w-0 bg-slate-50/50 pt-safe">
      
      <!-- Header -->
      <header class="h-16 md:h-24 bg-white/80 backdrop-blur-md border-b border-gray-200/60 flex items-center justify-between px-4 md:px-8 sticky top-0 md:relative z-10">
        <div>
           <h2 class="font-black text-gray-800 text-xl md:text-2xl flex items-center gap-3 tracking-tight">
             <span class="md:hidden text-arconGreen"><img src="https://raw.githubusercontent.com/KingAmada/arcon/refs/heads/main/arcon.jpg" class="w-8 h-8 object-contain"></span>
             <span id="page-title">Executive Dashboard</span>
           </h2>
           <p class="hidden md:block text-sm text-gray-500 font-medium mt-1">Real-time regulatory oversight & revenue metrics</p>
        </div>
        <div class="flex items-center gap-3">
           <span class="hidden md:flex items-center gap-2 px-3 py-1 bg-green-50 text-arconGreen text-xs font-bold rounded-full border border-green-100">
             <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> System Operational
           </span>
           <button onclick="location.reload()" class="w-10 h-10 flex items-center justify-center text-gray-400 hover:text-arconGreen hover:bg-green-50 transition-all rounded-full active:scale-95 bg-white border border-gray-100 shadow-sm">
             <i class="ph ph-arrows-clockwise text-xl"></i>
           </button>
        </div>
      </header>

      <!-- Content Scroll Area -->
      <div class="flex-1 overflow-y-auto p-4 md:p-8 relative">

        <!-- VIEW: OVERVIEW -->
        <div id="view-overview" class="space-y-6 animate-fade-in pb-8">
          
          <!-- Key Metrics Grid -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
            <!-- Metric 1: Revenue -->
            <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm card-hover relative overflow-hidden group">
              <div class="absolute right-0 top-0 w-32 h-32 bg-green-50/50 rounded-bl-[120px] -mr-6 -mt-6 transition-transform group-hover:scale-110"></div>
              <div class="relative z-10 flex justify-between items-start mb-4">
                 <div class="w-12 h-12 rounded-2xl bg-green-50 text-arconGreen flex items-center justify-center text-2xl shadow-sm"><i class="ph ph-currency-ngn"></i></div>
                 <span class="px-2 py-1 bg-green-100 text-green-700 text-[10px] font-bold rounded-full flex items-center gap-1">+12% <i class="ph ph-trend-up"></i></span>
              </div>
              <div class="relative z-10">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">YTD Revenue</p>
                <h3 class="text-3xl md:text-4xl font-black text-gray-800 mt-1 tracking-tight">₦45.2M</h3>
                <p class="text-xs text-gray-400 mt-2 font-medium">Target: ₦60M by Q4</p>
              </div>
            </div>

            <!-- Metric 2: Compliance -->
            <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm card-hover relative overflow-hidden group">
              <div class="absolute right-0 top-0 w-32 h-32 bg-yellow-50/50 rounded-bl-[120px] -mr-6 -mt-6 transition-transform group-hover:scale-110"></div>
              <div class="relative z-10 flex justify-between items-start mb-4">
                 <div class="w-12 h-12 rounded-2xl bg-yellow-50 text-arconGold flex items-center justify-center text-2xl shadow-sm"><i class="ph ph-shield-check"></i></div>
                 <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-[10px] font-bold rounded-full">Attention Needed</span>
              </div>
              <div class="relative z-10">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Compliance Rate</p>
                <h3 class="text-3xl md:text-4xl font-black text-gray-800 mt-1 tracking-tight">68%</h3>
                <p class="text-xs text-red-500 mt-2 font-bold flex items-center gap-1"><i class="ph ph-warning-circle"></i> Low adherence in Rivers</p>
              </div>
            </div>

            <!-- Metric 3: Pending -->
            <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm card-hover relative overflow-hidden group">
              <div class="absolute right-0 top-0 w-32 h-32 bg-blue-50/50 rounded-bl-[120px] -mr-6 -mt-6 transition-transform group-hover:scale-110"></div>
              <div class="relative z-10 flex justify-between items-start mb-4">
                 <div class="w-12 h-12 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center text-2xl shadow-sm"><i class="ph ph-hourglass-medium"></i></div>
                 <span class="px-2 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full">Active Queue</span>
              </div>
              <div class="relative z-10">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Pending Approvals</p>
                <h3 class="text-3xl md:text-4xl font-black text-gray-800 mt-1 tracking-tight">12</h3>
                <p class="text-xs text-gray-400 mt-2 font-medium">Avg processing time: 4h</p>
              </div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Chart -->
            <div class="lg:col-span-2 bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
               <div class="flex justify-between items-center mb-6">
                 <div>
                   <h4 class="font-bold text-gray-800 text-lg">Revenue Trend</h4>
                   <p class="text-xs text-gray-400">Monthly breakdown (Millions NGN)</p>
                 </div>
                 <button class="text-arconGreen hover:bg-green-50 p-2 rounded-lg transition"><i class="ph ph-download-simple text-xl"></i></button>
               </div>
               <div class="h-64 w-full">
                 <canvas id="revChart"></canvas>
               </div>
            </div>

            <!-- Side Chart -->
            <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
               <div class="mb-6">
                 <h4 class="font-bold text-gray-800 text-lg">Asset Types</h4>
                 <p class="text-xs text-gray-400">Distribution by category</p>
               </div>
               <div class="h-64 w-full flex justify-center relative">
                 <canvas id="distChart"></canvas>
                 <!-- Center Text Overlay -->
                 <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                    <div class="text-center">
                       <span class="block text-2xl font-black text-gray-800">1.2k</span>
                       <span class="block text-[10px] text-gray-400 uppercase font-bold">Total</span>
                    </div>
                 </div>
               </div>
            </div>
          </div>
        </div>

        <!-- VIEW: MAP -->
        <div id="view-map" class="hidden h-[75vh] md:h-full flex flex-col bg-white rounded-3xl border border-gray-200 shadow-sm overflow-hidden relative animate-fade-in">
           <!-- Map Header Overlay -->
           <div class="absolute top-4 left-4 right-4 z-[400] flex justify-between items-start pointer-events-none">
              <div class="bg-white/95 backdrop-blur rounded-2xl shadow-xl border border-gray-100 p-4 pointer-events-auto">
                 <h3 class="font-bold text-gray-800 text-sm flex items-center gap-2"><i class="ph ph-globe text-arconGreen"></i> National Compliance Map</h3>
                 <p class="text-[10px] text-gray-400 mt-1">Live feed from zonal offices</p>
              </div>
              <div class="bg-white/95 backdrop-blur rounded-full px-4 py-2 shadow-xl border border-gray-100 text-xs font-bold flex gap-4 pointer-events-auto">
                 <span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-full bg-arconGreen shadow-sm shadow-green-500/50"></span> Compliant</span>
                 <span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-full bg-red-500 shadow-sm shadow-red-500/50"></span> Illegal/Expired</span>
              </div>
           </div>

           <div id="map-dg" class="flex-grow w-full bg-slate-100 z-0"></div>
        </div>

      </div>
    </main>
  </div>

  <script>
    let mapInstance = null;
    let revChart = null;
    let distChart = null;

    function setView(viewId) {
      // Hide all views
      ['overview', 'map'].forEach(v => document.getElementById('view-'+v).classList.add('hidden'));
      
      // Update Desktop Nav
      document.querySelectorAll('.desktop-nav-btn').forEach(b => {
        b.className = "desktop-nav-btn group w-full text-left px-4 py-4 rounded-xl flex items-center gap-3 text-sm font-semibold transition-all duration-200 text-white/80 hover:bg-white/10 hover:text-white hover:shadow-lg";
      });
      // Update Mobile Nav
      document.querySelectorAll('.mobile-nav-btn').forEach(b => {
        b.className = "mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 transition-colors group";
        b.querySelector('div').className = "p-1.5 rounded-xl group-hover:bg-gray-50 transition-colors";
      });

      // Show Active View
      document.getElementById('view-'+viewId).classList.remove('hidden');
      document.getElementById('page-title').innerText = viewId === 'overview' ? 'Executive Dashboard' : 'National Map';

      // Highlight Desktop
      const dBtn = document.querySelector(`.desktop-nav-btn[onclick*="${viewId}"]`);
      if(dBtn) {
        dBtn.className = "desktop-nav-btn group w-full text-left px-4 py-4 rounded-xl flex items-center gap-3 text-sm font-bold bg-white text-arconGreen shadow-lg shadow-black/10";
      }

      // Highlight Mobile
      const mBtn = document.getElementById('mob-nav-'+viewId);
      if(mBtn) {
        mBtn.className = "mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-arconGreen transition-colors group";
        mBtn.querySelector('div').className = "p-1.5 rounded-xl bg-green-50 text-arconGreen transition-colors";
      }

      // Trigger specifics
      if(viewId === 'map') {
        setTimeout(initMap, 200);
      }
    }

    function initMap() {
      if(mapInstance) {
          mapInstance.invalidateSize();
          return;
      }
      mapInstance = L.map('map-dg').setView([9.0820, 8.6753], 6);
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { 
        attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
        subdomains: 'abcd',
        maxZoom: 19
      }).addTo(mapInstance);
      
      // Custom Marker Styles
      const compliantStyle = { color: '#008751', fillColor: '#008751', fillOpacity: 0.6, radius: 8, weight: 2, color: 'white' };
      const illegalStyle = { color: '#ef4444', fillColor: '#ef4444', fillOpacity: 0.6, radius: 8, weight: 2, color: 'white' };

      // Mock Data
      L.circleMarker([9.0765, 7.3986], compliantStyle).addTo(mapInstance).bindPopup("<b class='text-arconGreen'>FCT-001</b><br>Status: Compliant");
      L.circleMarker([6.5244, 3.3792], compliantStyle).addTo(mapInstance).bindPopup("<b class='text-arconGreen'>LAG-004</b><br>Status: Compliant");
      L.circleMarker([4.8156, 7.0498], illegalStyle).addTo(mapInstance).bindPopup("<b class='text-red-500'>RIV-099</b><br>Status: Expired License");
      L.circleMarker([12.0022, 8.5920], compliantStyle).addTo(mapInstance).bindPopup("<b class='text-arconGreen'>KAN-102</b><br>Status: Compliant");
    }

    function initCharts() {
       const ctxRev = document.getElementById('revChart').getContext('2d');
       
       // Gradient for Line Chart
       let gradient = ctxRev.createLinearGradient(0, 0, 0, 400);
       gradient.addColorStop(0, 'rgba(0, 135, 81, 0.2)');   
       gradient.addColorStop(1, 'rgba(0, 135, 81, 0)');

       revChart = new Chart(ctxRev, {
         type: 'line',
         data: {
           labels: ['Jan','Feb','Mar','Apr','May','Jun'],
           datasets: [{ 
             label: 'Revenue (M)', 
             data: [12, 19, 15, 25, 22, 45.2], 
             borderColor: '#008751',
             backgroundColor: gradient,
             borderWidth: 3,
             pointBackgroundColor: '#fff',
             pointBorderColor: '#008751',
             pointBorderWidth: 2,
             pointRadius: 4,
             fill: true,
             tension: 0.4
           }]
         },
         options: { 
           responsive: true,
           maintainAspectRatio: false, 
           plugins: { legend: { display: false } }, 
           scales: { 
             y: { 
               beginAtZero: true, 
               grid: { color: '#f3f4f6' },
               border: { display: false }
             },
             x: {
               grid: { display: false },
               border: { display: false }
             }
           } 
         }
       });

       distChart = new Chart(document.getElementById('distChart'), {
         type: 'doughnut',
         data: {
           labels: ['LED Digital', 'Static Board', 'Lamp Post'],
           datasets: [{ 
             data: [30, 50, 20], 
             backgroundColor: ['#008751', '#F5A800', '#0B1220'],
             borderWidth: 0,
             hoverOffset: 4
           }]
         },
         options: { 
           responsive: true,
           maintainAspectRatio: false,
           cutout: '75%',
           plugins: {
             legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } }
           }
         }
       });
    }

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
      initCharts();
      // Default view
      setView('overview');
    });

  </script>
</body>
</html>
